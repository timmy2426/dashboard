document.addEventListener("DOMContentLoaded",function(){function a(a){let b=10>a?"0"+`${a}`:`${a}`;return b}function b(a){let b=a[0];return a.forEach(a=>{a>b&&(b=a)}),b}function c(a,b){let c=document.querySelector(a),d=document.querySelector(b),e=c.clientHeight;d.setAttribute("style",`height: ${e-120}px;`)}function d(b,c){let d=Math.floor(c/100),e=Math.floor(d/60%60),f=Math.floor(d/3600%100);document.querySelector(`#t-sec-${b}`).innerHTML=a(d%60),document.querySelector(`#t-min-${b}`).innerHTML=a(e),document.querySelector(`#t-hrs-${b}`).innerHTML=a(f),k[l.indexOf(parseInt(b))].count=c}function e(a){a.addEventListener("click",b=>{let c=b.target.dataset.id,e=l.indexOf(parseInt(c));if("\u958B\u59CB"===a.innerHTML){let b=new Worker("https://tadralling.com/dist/dashboard/counter.min.js");b.postMessage({count:`${k[e].count}`}),b.onmessage=function(a){let b=a.data.count;d(c,b)},a.addEventListener("click",()=>{b.terminate()},{once:!0}),a.innerHTML="\u66AB\u505C"}else a.innerHTML="\u958B\u59CB"})}function f(a,b){a.addEventListener("click",a=>{let c=a.target.dataset.id,d=l.indexOf(parseInt(c));"\u958B\u59CB"!==b.innerHTML&&b.click(),k[d].count=0,document.querySelector(`#t-sec-${c}`).innerHTML="00",document.querySelector(`#t-min-${c}`).innerHTML="00",document.querySelector(`#t-hrs-${c}`).innerHTML="00"})}function g(a,b){a.addEventListener("click",a=>{let c=a.target.dataset.id,d=l.indexOf(parseInt(c)),e=document.getElementById(c);"\u958B\u59CB"!==b.innerHTML&&b.click(),k.splice(d,1),l.splice(d,1),e.remove()})}function h(b){let d=Math.floor(b/100),c=Math.floor(d/60%60),e=Math.floor(d/3600%100);document.querySelector("#s-tms").innerHTML=a(b%100),document.querySelector("#s-sec").innerHTML=a(d%60),document.querySelector("#s-min").innerHTML=a(c),document.querySelector("#s-hrs").innerHTML=a(e),m=b}function i(a){a.addEventListener("click",a=>{let b=a.target.dataset.id,c=o.indexOf(parseInt(b)),d=document.getElementById(b);o.splice(c,1),d.remove()})}class j{constructor(a){this.id=Date.now(),this.name=a,this.count=0}}let k=[],l=[],m=0,n=0,o=[];if(c("#stopwatch-record-area","#stopwatch-records"),c("#timer-area","#timer-columns"),localStorage.getItem("timerList")&&(k=JSON.parse(localStorage.getItem("timerList"))),localStorage.getItem("timerIdList")&&(l=JSON.parse(localStorage.getItem("timerIdList"))),localStorage.getItem("timerHTML")&&(document.querySelector("#timer-columns").innerHTML=localStorage.getItem("timerHTML"),document.querySelectorAll(".timer").forEach(a=>{let b=a.querySelector("#t-start-pause"),c=a.querySelector("#t-reset"),d=a.querySelector("#t-delete");e(b),f(c,b),g(d,b)})),localStorage.getItem("stopwatchCount")){m=localStorage.getItem("stopwatchCount");let b=Math.floor(m/100),c=m%100,d=Math.floor(b/60%60),e=Math.floor(b/3600%100);document.querySelector("#s-tms").innerHTML=a(c),document.querySelector("#s-sec").innerHTML=a(b%60),document.querySelector("#s-min").innerHTML=a(d),document.querySelector("#s-hrs").innerHTML=a(e)}localStorage.getItem("recordNum")&&(n=localStorage.getItem("recordNum")),localStorage.getItem("recordIdList")&&(o=JSON.parse(localStorage.getItem("recordIdList"))),localStorage.getItem("recordHTML")&&(document.querySelector("#stopwatch-records").innerHTML=localStorage.getItem("recordHTML"),document.querySelectorAll(".record").forEach(a=>{let b=a.querySelector("#s-delete");i(b)})),window.addEventListener("unload",()=>{document.querySelectorAll(".timer").forEach(a=>{let b=a.querySelector("#t-start-pause");"\u958B\u59CB"!==b.innerHTML&&(b.innerHTML="\u958B\u59CB")});let a=document.querySelector("#timer-columns");localStorage.setItem("timerList",JSON.stringify(k)),localStorage.setItem("timerIdList",JSON.stringify(l)),localStorage.setItem("timerHTML",a.innerHTML);let b=document.querySelector("#stopwatch-records");localStorage.setItem("recordIdList",JSON.stringify(o)),localStorage.setItem("stopwatchCount",m),localStorage.setItem("recordNum",n),localStorage.setItem("recordHTML",b.innerHTML)}),document.querySelector("#input-timer-name").addEventListener("keydown",a=>{"Enter"===a.key&&document.querySelector("#t-build").click()}),document.querySelector("#t-build").onclick=function(){if(""!==document.querySelector("#input-timer-name").value){let a=b(l),c=document.getElementById(a),d=document.querySelector("#input-timer-name").value;document.querySelector("#input-timer-name").value="";let h=new j(d);k.push(h),l.push(h.id);let i=document.createElement("div");i.setAttribute("class","timer"),i.setAttribute("id",h.id),i.innerHTML="<div class=\"title\"><h3>"+h.name+"</h3></div><div class=\"times\"><p><span id=\"t-hrs-"+h.id+"\">00</span> \u6642 <span id=\"t-min-"+h.id+"\">00</span> \u5206 <span id=\"t-sec-"+h.id+"\">00</span> \u79D2</p></div><div class=\"controls\"><button id=\"t-start-pause\" data-id=\""+h.id+"\">\u958B\u59CB</button><button id=\"t-reset\" data-id=\""+h.id+"\">\u6B78\u96F6</button><button id=\"t-delete\" data-id=\""+h.id+"\">\u522A\u9664</button></div>",""===document.querySelector("#timer-columns").innerHTML?document.querySelector("#timer-columns").appendChild(i):document.querySelector("#timer-columns").insertBefore(i,c);let m=document.getElementById(h.id),n=m.querySelector("#t-start-pause"),o=m.querySelector("#t-reset"),p=m.querySelector("#t-delete");e(n),f(o,n),g(p,n)}},document.querySelector("#t-clean").onclick=function(){document.querySelectorAll(".timer").forEach(a=>{let b=a.querySelector("#t-start-pause");"\u958B\u59CB"!==b.innerHTML&&b.click()}),document.querySelector("#timer-columns").innerHTML="",k=[],l=[]},document.querySelector("#s-start-pause").onclick=function(){if("\u958B\u59CB"===document.querySelector("#s-start-pause").innerHTML){let a=new Worker("https://tadralling.com/dist/dashboard/counter.min.js");a.postMessage({count:`${m}`}),a.onmessage=function(a){let b=a.data.count;h(b)},document.querySelector("#s-start-pause").addEventListener("click",()=>{a.terminate()},{once:!0}),document.querySelector("#s-start-pause").innerHTML="\u66AB\u505C"}else document.querySelector("#s-start-pause").innerHTML="\u958B\u59CB"},document.querySelector("#s-reset").onclick=function(){function a(a){document.getElementById(a).innerHTML="00"}"\u958B\u59CB"!==document.querySelector("#s-start-pause").innerHTML&&document.querySelector("#s-start-pause").click(),m=0,a("s-tms"),a("s-sec"),a("s-min"),a("s-hrs")},document.querySelector("#s-record").onclick=function(){n++;let a=b(o),c=document.getElementById(a),d=document.querySelector("#s-tms").innerHTML,e=document.querySelector("#s-sec").innerHTML,f=document.querySelector("#s-min").innerHTML,g=document.querySelector("#s-hrs").innerHTML,h=Date.now();o.push(h);let j=document.createElement("div");j.setAttribute("class","record"),j.setAttribute("id",h),j.innerHTML="<div class=\"times\"><p>#"+n+"&emsp;&emsp;"+g+" \u6642 "+f+" \u5206 "+e+" \u79D2<span> "+d+"</span></p></div><div class=\"record-controls\"><button id=\"s-delete\" data-id=\""+h+"\">\u522A\u9664</button></div>",""===document.querySelector("#stopwatch-records").innerHTML?document.querySelector("#stopwatch-records").appendChild(j):document.querySelector("#stopwatch-records").insertBefore(j,c);let k=document.querySelector("#stopwatch-records"),l=k.querySelector("#s-delete");i(l)},document.querySelector("#s-clean").onclick=function(){document.querySelector("#stopwatch-records").innerHTML="",n=0,o=[]}});